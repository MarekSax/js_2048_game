!function(){function t(t,e,n){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return n}function e(t,e){!function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i=new WeakSet,s=new WeakSet,o=new WeakSet,c=new WeakSet,l=new WeakSet,u=new WeakSet,h=new WeakSet,f=new WeakSet,d=new WeakSet;function v(){return Array.from({length:4},function(){return[,,,,].fill(0)})}function m(){var t=[];return this.state.forEach(function(e,n){e.forEach(function(e,r){0===e&&t.push({rowIndex:n,cellIndex:r})})}),t}function y(){var e=t(this,s,m).call(this);if(0!==e.length){var n=e[Math.floor(Math.random()*e.length)];this.state[n.rowIndex][n.cellIndex]=Math.random()>.1?2:4}}function p(t){for(var e=t.filter(function(t){return 0!==t}),n=[],r=0;r<e.length;)e[r]===e[r+1]?(n.push(2*e[r]),this.score+=2*e[r],r+=2):(n.push(e[r]),r+=1);return n.push.apply(n,a(Array(4-n.length).fill(0))),n}function w(t){return t[0].map(function(e,n){return t.map(function(t){return t[n]})})}function g(t){return JSON.stringify(this.state)!==JSON.stringify(t)}function S(){this.status=this.state.some(function(t){return t.includes(2048)})?"win":this.status}function b(){var t=!0,e=!1,n=void 0;try{for(var r,a=this.state[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=function(){var t=r.value;if(t.some(function(t){return 0===t}))return{v:!1};for(var e=0;e<t.length;e++)if(t[e]===t[e+1])return{v:!1}}();if("object"==(i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i))return i.v}}catch(t){e=!0,n=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}for(var s=0;s<4;s++)for(var o=[this.state[0][s],this.state[1][s],this.state[2][s],this.state[3][s]],c=0;c<o.length;c++)if(o[c]===o[c+1])return!1;return!0}function k(e){t(this,u,g).call(this,e)&&(this.state=e,t(this,o,y).call(this),t(this,h,S).call(this),t(this,f,b).call(this)&&(this.status="lose"))}var A=new(function(){var r,m;function g(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t(this,i,v).call(this);!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,g),e(this,i),e(this,s),e(this,o),e(this,c),e(this,l),e(this,u),e(this,h),e(this,f),e(this,d),this.initialState=n,this.state=this.initialState.map(function(t){return a(t)}),this.score=0,this.status="idle"}return r=[{key:"moveLeft",value:function(){var e=this;if("playing"===this.status){var n=this.state.map(function(n){return t(e,c,p).call(e,n)});t(this,d,k).call(this,n)}}},{key:"moveRight",value:function(){var e=this;if("playing"===this.status){var n=this.state.map(function(n){var r=n.slice().reverse();return t(e,c,p).call(e,r).reverse()});t(this,d,k).call(this,n)}}},{key:"moveUp",value:function(){var e=this;if("playing"===this.status){var n=t(this,l,w).call(this,this.state).map(function(n){return t(e,c,p).call(e,n)});t(this,d,k).call(this,t(this,l,w).call(this,n))}}},{key:"moveDown",value:function(){var e=this;if("playing"===this.status){var n=t(this,l,w).call(this,this.state).map(function(n){var r=n.slice().reverse();return t(e,c,p).call(e,r).reverse()});t(this,d,k).call(this,t(this,l,w).call(this,n))}}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.state}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.status="playing",t(this,o,y).call(this),t(this,o,y).call(this)}},{key:"restart",value:function(){this.state=this.initialState.map(function(t){return a(t)}),this.score=0,this.status="idle"}}],n(g.prototype,r),m&&n(g,m),g}()),L=document.querySelector(".button",".start");function x(){var t=A.getState(),e=document.querySelector(".game-field").querySelector("tbody");e.innerHTML="";for(var n=0;n<t.length;n++){var r=t[n],a=document.createElement("tr");a.className="field-row";for(var i=0;i<r.length;i++){var s=r[i],o=document.createElement("td");o.textContent=0!==s?s:"",o.className=0!==s?"field-cell field-cell--".concat(s):"field-cell",a.appendChild(o)}e.appendChild(a)}}function C(){document.querySelector(".game-score").innerText=A.getScore()}function E(t,e){var n=document.querySelector(".message-start"),r=document.querySelector(".message-win"),a=document.querySelector(".message-lose");if("hide"===t)switch(e){case"start":n.classList.add("hidden");break;case"win":r.classList.add("hidden");break;case"lose":a.classList.add("hidden")}if("show"===t)switch(e){case"start":n.classList.remove("hidden");break;case"win":r.classList.remove("hidden");break;case"lose":a.classList.remove("hidden")}}function W(){x(),C(),function(){switch(A.getStatus()){case"win":E("show","win");break;case"lose":E("show","lose")}}()}L.addEventListener("click",function(){switch(A.getStatus()){case"idle":A.start(),x(),L.className="button restart",L.textContent="Restart",E("hide","start"),C();break;case"playing":A.restart(),x(),L.className="button start",L.textContent="Start",E("show","start"),C();break;case"win":A.restart(),x(),L.className="button start",L.textContent="Start",E("hide","win"),E("show","start"),C();break;case"lose":A.restart(),x(),L.className="button start",L.textContent="Start",E("hide","lose"),E("show","start"),C()}}),document.addEventListener("keydown",function(t){switch(t.key){case"ArrowLeft":A.moveLeft(),W();break;case"ArrowRight":A.moveRight(),W();break;case"ArrowUp":A.moveUp(),W();break;case"ArrowDown":A.moveDown(),W()}})}();
//# sourceMappingURL=index.83f2c579.js.map
